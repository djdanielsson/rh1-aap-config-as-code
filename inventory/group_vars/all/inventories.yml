---
# "{{ env }} Environment Inventories"
# Using _qa suffix for wildcard merging
#
# ⚠️ IMPORTANT: Always use dynamic inventory sources (OCP-V, VMware, etc.)
# Never define static hosts. See: docs/ANSIBLE-BEST-PRACTICES.md

controller_inventories_all:
  - name: "{{ env }} Infrastructure"
    description: "{{ env }} VMs from OpenShift Virtualization"
    organization: Platform
    variables:
      environment: "{{ env }}"
      ansible_connection: ssh
      ansible_user: ansible
      ansible_python_interpreter: /usr/bin/python3

  - name: "{{ env }} Localhost"
    description: Localhost inventory for API automation
    organization: Default
    variables:
      ansible_connection: local

controller_inventory_sources_qa:
  - name: "{{ env }} OCP-V VMs"
    inventory: "{{ env }} Infrastructure"
    source: "openshift_virtualization"
    source_vars:
      plugin: "kubevirt.core.kubevirt"
      # connections:
      #   - namespaces:
      #       - qa-vms
      #       - qa-apps
      #     network_name: default
      host_format: "name"
      label_selector: "environment={{ env }}"
      append_base_domain: "qa.internal.example.com"
    credential: "OCP {{ env }} Cluster"
    update_on_launch: true
    update_on_project_update: true
    update_cache_timeout: 300
    overwrite: true
    overwrite_vars: true
    verbosity: 1

# Inventory Groups (applied to dynamic inventory)
controller_groups_qa:
  - name: "webservers"
    inventory: "{{ env }} Infrastructure"
    variables:
      webserver_port: 443
      webserver_ssl_enabled: true

  - name: "databases"
    inventory: "{{ env }} Infrastructure"
    variables:
      database_backup_enabled: true
      database_backup_schedule: "0 3 * * *"
...
