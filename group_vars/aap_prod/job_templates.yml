---
# Production Environment Job Templates
# All using wildcard suffixes for consistent merging

controller_job_templates_prod_web:
  - name: Deploy Web Application (Production)
    description: Deploys web application to PRODUCTION
    job_type: run
    organization: Applications
    inventory: Production Servers
    project: Platform Automation
    playbook: playbooks/deploy_web_app.yml
    execution_environment: Web EE (Production)
    credentials:
      - Production SSH Key
      - Production Vault Credentials
    ask_variables_on_launch: false  # No ad-hoc variables in prod
    ask_limit_on_launch: false
    extra_vars:
      app_environment: production
      app_version: "{{ app_version }}"
    diff_mode: true  # Show changes
    timeout: 3600
    verbosity: 0

controller_job_templates_prod_health:
  - name: Production Health Check
    description: Validates production system health
    job_type: check
    organization: Platform
    inventory: Production Servers
    project: Platform Automation
    playbook: playbooks/health_check.yml
    execution_environment: Default Execution Environment
    timeout: 600

controller_job_templates_prod_rollback:
  - name: Production Rollback
    description: Rollback to previous version
    job_type: run
    organization: Applications
    inventory: Production Servers
    project: Platform Automation
    playbook: playbooks/rollback.yml
    execution_environment: Web EE (Production)
    credentials:
      - Production SSH Key
    ask_variables_on_launch: true  # Allow specifying rollback version
    survey_enabled: true
    survey_spec:
      name: Rollback Configuration
      description: Specify rollback parameters
      spec:
        - question_name: Target Version
          question_description: Version to rollback to
          required: true
          type: text
          variable: rollback_version
          default: ""

