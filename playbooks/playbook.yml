---
# AAP Configuration-as-Code Main Playbook
# Applies declarative configuration to AAP environments
# Uses: infra.aap_configuration collection with dispatch role

- name: Configure Ansible Automation Platform
  hosts: localhost
  connection: local
  gather_facts: false

  vars:
    # Enable validation and diff output
    controller_configuration_async_retries: 60
    controller_configuration_async_delay: 2

    # Dispatch role configuration
    # Enable wildcard variable matching for better organization
    dispatch_include_wildcard_vars: true
  tasks:
    # Use dispatch role to automatically apply all configurations
    # The dispatch role handles proper ordering and dependency management
    - name: Apply AAP configuration using dispatch role
      ansible.builtin.include_role:
        name: infra.aap_configuration.dispatch
      vars:
        dispatch_include_wildcard_vars: true
      tags: always


...
